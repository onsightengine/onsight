<!DOCTYPE html>
<html lang='en'>
<head>
    <title>Salinity • Playground</title>
    <meta charset='UTF-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
    <meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'>
    <link rel='icon' type='image/png' href='../files/logo/salinity256.png' />
    <link rel='stylesheet' href='./main.css' />
</head>
<body>

    <div id='container' style='position:absolute; width:100%; height:100%; top:0px; left:0px; overflow: hidden;'></div>

    <script src='./imports.js'></script>

    <script type='module'>

        import * as SALT from 'salt';
        import * as SUEY from 'suey';

        const scene = new SALT.Object2D();

        // Objects
        const center = new SALT.Circle(10);
        center.setPosition(0, 0);
        center.fillStyle.color = '#ff00ff';
        center.draggable = false;
        center.selectable = false;
        scene.add(center);

        const box1 = new SALT.Box();
        box1.setPosition(-100, 0);
        box1.fillStyle.color = '#ff0000';
        scene.add(box1);

        const box2 = new SALT.Box();
        box2.setPosition(+100, 0);
        box2.fillStyle.color = '#00ff00';
        // box2.origin.set(25, 25);
        box2.selectable = false;
        scene.add(box2);

        const box3 = new SALT.Box();
        box3.setPosition(0, -150);
        box3.fillStyle.color = '#0000ff';
        scene.add(box3);

        const rainbowBox = new SALT.Box();
        rainbowBox.setPosition(-100, 200);
        rainbowBox.radius = 25;
        rainbowBox.fillStyle = new SALT.LinearGradientStyle();
        rainbowBox.fillStyle.start.set(-50, -50);
        rainbowBox.fillStyle.end.set(50, 50);
        rainbowBox.fillStyle.addColorStop(0, '#ff0000');
        rainbowBox.fillStyle.addColorStop(0.5, '#00ff00');
        rainbowBox.fillStyle.addColorStop(1, '#0000ff');
        scene.add(rainbowBox);

        const circle = new SALT.Circle();
        circle.setPosition(100, 0);
        circle.radius = 50;
        rainbowBox.add(circle);

        // Grid Helper
        const grid = new SALT.GridHelper();
        scene.add(grid);

        // Renderer
        const renderer = new SALT.Renderer({ width: window.innerWidth, height: window.innerHeight });
        const container = document.getElementById('container');
        container.appendChild(renderer.dom);

        // Camera
        const camera = new SALT.Camera2D();
        camera.position.copy(new SALT.Vector2(renderer.width / 2.0, renderer.height / 2.0));

        // Camera Controls
        const cameraControls = new SALT.CameraControls(camera);
        renderer.addUpdate(cameraControls);

        // Select Controls
        const selectControls = new SALT.SelectControls();
        renderer.addUpdate(selectControls);

        // Start
        const debug = new SALT.Debug();
        const onBeforeRender = () => { debug.startFrame(renderer); };
        const onAfterRender = () => { debug.endFrame(renderer); };
        renderer.start(scene, camera, onBeforeRender, onAfterRender);

        /////

        const params = {
            sizeX: 50,
            sizeY: 50,
            scaleX: 1,
            scaleY: 1,
            rotation: 0,
        };

        const gui = new SUEY.Gooey();

        const folder1 = gui.addFolder();
        folder1.add(params, 'sizeX').min(1).step(5).onChange(() => { grid.gridX = params.sizeX; });
        folder1.add(params, 'sizeY').min(1).step(5).onChange(() => { grid.gridY = params.sizeY; });
        folder1.add(params, 'scaleX', 0, 10, 0.2, 1).onChange(() => { grid.scale.x = params.scaleX; });
        folder1.add(params, 'scaleY', 0, 10, 0.2, 1).onChange(() => { grid.scale.y = params.scaleY; });
        folder1.add(params, 'rotation', 0, 360, 5, 1, '°').onChange(() => { grid.rotation = params.rotation * (Math.PI / 180); });

    </script>

</body>
</html>